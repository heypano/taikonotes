(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4200:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Qe}});var o=t(9319),s=t(7294),r=t(2809),i=t(5126);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var l="main",u=function(e){return(0,o.v9)((function(n){return n.main.sections[e].settings}),o.wU)},a=function(e){return(0,o.v9)((function(n){return void 0!==e?n.main.sections[e].settings.soundObj:null}),o.wU)},d=function(e){return(0,o.v9)((function(n){var t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},n.main.sections[e]);return delete t.cells,t}),o.wU)},f=function(e,n){return(0,o.v9)((function(t){var o;return(null===(o=t.main.sections[e])||void 0===o?void 0:o.cells[n])||{}}),o.wU)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{cells:[],id:e,sectionName:"Line ".concat(e),totalLines:1,settings:{cellsPerLine:4,divideEvery:2,sounds:"don, kon, ka",soundObj:{"":"",don:"don",kon:"kon",ka:"ka"}}}},p=(0,i.oM)({name:l,initialState:{title:"THE song",sections:[{comment:"this is a section comment",cells:[{sound:"don",comment:"play this super loud"},null,{sound:"ka",intensity:1},{sound:"don",comment:"raise your arms"},{sound:""},{sound:"ka",intensity:1},{sound:"don"},{sound:""},{sound:"don",intensity:1},null,{sound:"don",intensity:1},null,{sound:"do"},{sound:"ko"},{sound:"don",intensity:1},null,{sound:"do"},{sound:"ro"},{sound:"tsu"},{sound:"ku"},{sound:"su"},{sound:"ka",intensity:1},{sound:"ra",intensity:1},null,{sound:"do"},{sound:"kon",intensity:1},{sound:""},{sound:"ka",intensity:1},{sound:"su"},{sound:"ko"},{sound:"do"},{sound:"ko"},{sound:"don",intensity:1},null,null,{sound:"ko"},{sound:"don",intensity:1},{sound:"doko"},{sound:"kara",intensity:1},{sound:"don",intensity:1},{sound:"su"},{sound:"kon",intensity:1},null,{sound:"don",intensity:1},null,{sound:"ko"},{sound:"do",intensity:1},{sound:"do",intensity:1},{sound:"su"},{sound:"ka",intensity:1},{sound:"don",intensity:1},null,{sound:"su"},{sound:"do"},{sound:"ka",intensity:1},null,{sound:"su"},{sound:"don",intensity:1},null,null,{sound:"don",intensity:1}],id:1,sectionName:"Line 1",totalLines:4,settings:{cellsPerLine:16,divideEvery:2,sounds:"don, kon, ka, do, ko, ro, su, tsu,ku, kara, ra, doko",soundObj:{"":"",don:"don",kon:"kon",ka:"ka",do:"do",ko:"ko",ro:"ro",su:"su",tsu:"tsu",ku:"ku",kara:"kara",ra:"ra",doko:"doko"}}},{cells:[{sound:"don"},null,{sound:"ka",intensity:1},{sound:"don"},{sound:""},{sound:"ka",intensity:1},{sound:"don"},{sound:""},{sound:"don",intensity:1},null,{sound:"don",intensity:1},null,{sound:"do"},{sound:"ko"},{sound:"don",intensity:1},null,{sound:"do"},{sound:"ro"},{sound:"tsu"},{sound:"ku"},{sound:"su"},{sound:"ka",intensity:1},{sound:"ra",intensity:1},null,{sound:"do"},{sound:"kon",intensity:1},{sound:""},{sound:"ka",intensity:1},{sound:"su"},{sound:"ko"},{sound:"do"},{sound:"ko"},{sound:"don",intensity:1},null,null,{sound:"ko"},{sound:"don",intensity:1},{sound:"doko"},{sound:"kara",intensity:1},{sound:"don",intensity:1},{sound:"su"},{sound:"kon",intensity:1},null,{sound:"don",intensity:1},null,{sound:"ko"},{sound:"do",intensity:1},{sound:"do",intensity:1},{sound:"su"},{sound:"ka",intensity:1},{sound:"don",intensity:1},null,{sound:"su"},{sound:"do"},{sound:"ka",intensity:1},null,{sound:"su"},{sound:"don",intensity:1},null,null,{sound:"don",intensity:1}],id:2,sectionName:"Line 2",totalLines:4,settings:{cellsPerLine:4,divideEvery:2,sounds:"don, kon, ka",soundObj:{"":"",don:"don",kon:"kon",ka:"ka"}}}]},reducers:{clearState:function(e,n){e.sections=[m()]},setSongTitle:function(e,n){e.title=n.payload},setSettings:function(e,n){var t=n.payload,o=t.sectionId,s=t.settings;Object.keys(s).forEach((function(n){e.sections[o].settings[n]=s[n]})),e.sections[o].settings.soundObj=Object.fromEntries(",".concat(e.sections[o].settings.sounds).split(",").map((function(e){return[e.trim(),e.trim()]})))},setTotalLines:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.totalLines,r=Math.max(s,1),i=e.sections[o].settings.cellsPerLine;e.sections[o].totalLines=r,e.sections[o].cells=e.sections[o].cells.slice(0,r*i)},setSectionName:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.sectionName;e.sections[o].sectionName=s},setSectionComment:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.comment;e.sections[o].comment=s},setSound:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.cellIndex,r=t.sound,i=e.sections[o].cells[s]||{};i.sound=r,e.sections[o].cells[s]=i},setCellComment:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.cellIndex,r=t.comment,i=e.sections[o].cells[s]||{};i.comment=r,e.sections[o].cells[s]=i},setIntensity:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.cellIndex,r=t.intensity,i=e.sections[o].cells[s]||{};i.intensity=r,e.sections[o].cells[s]=i},setMainState:function(e,n){return n.payload},addSection:function(e,n){e.sections.push(m(e.sections.length+1))},removeLastSection:function(e,n){e.sections.pop()}}}),v=p.actions,x=(v.setCellsPerLine,v.setDivideEvery,v.setSongTitle),h=v.setTotalLines,j=v.setSectionName,g=v.setSectionComment,y=(v.setSounds,v.setSettings),b=v.setSound,O=v.setCellComment,w=v.setIntensity,k=v.setMainState,C=v.addSection,P=v.removeLastSection,N=v.clearState,I=p.reducer;function S(e){if(e.clientX&&e.clientY)return[e.clientX,e.clientY];if(e.target){var n=e.target.getBoundingClientRect();return[n.x,n.y]}return null}function L(e){return function(n){" "===n.key&&e(n)}}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M="cell",_={open:!1,menuCoordinates:void 0,cellIndex:void 0,sectionIndex:void 0},Z=(0,i.oM)({name:M,initialState:_,reducers:{setCellPopupState:function(e,n){var t=n.payload,o=t.sectionIndex,s=t.cellIndex,r=t.menuCoordinates,i=t.open;return D(D({},e),{},{sectionIndex:o,cellIndex:s,menuCoordinates:r,open:i})},setCellPopupOpen:function(e,n){e.open=n.payload},setCellPopupMenuCoordinates:function(e,n){e.menuCoordinates=n.payload},setCellPopupCellIndex:function(e,n){e.cellIndex=n.payload},setCellPopupSectionIndex:function(e,n){e.sectionIndex=n.payload}}}),T=Z.actions,U=T.setCellPopupOpen,z=(T.setCellPopupMenuCoordinates,T.setCellPopupCellIndex,T.setCellPopupSectionIndex,T.setCellPopupState),H=Z.reducer,W=t(5893),B=function(){return(0,W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"max-h-full max-w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})};function R(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?R(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X="edit",Y=function(){return(0,o.v9)((function(e){return e.edit.isEditing}))},A=(0,i.oM)({name:X,initialState:{isEditing:!1,sectionCommentOpen:!1,sectionCommentCoordinates:null,sectionCommentSectionId:null},reducers:{setIsEditing:function(e,n){e.isEditing=n.payload},setSectionCommentOpen:function(e,n){e.sectionCommentOpen=n.payload},setSectionCommentData:function(e,n){var t=n.payload,o=t.sectionCommentOpen,s=t.sectionCommentSectionId,r=t.sectionCommentCoordinates;return F(F({},e),{},{sectionCommentOpen:o,sectionCommentSectionId:s,sectionCommentCoordinates:r})}}}),G=A.actions,J=G.setIsEditing,K=G.setSectionCommentOpen,V=G.setSectionCommentData,q=A.reducer,Q=function(e){var n=e.cellIndex,t=e.sectionIndex,r=e.isPlaying,i=e.isStartingCell,c=e.isFirstCellInLine,l=e.cellsPerLine,u=(0,s.useRef)(),d=(0,o.I0)(),m=a(t),p=Y(),v=f(t,n),x=v.sound,h=void 0===x?0:x,j=v.intensity,g=v.comment,y=h&&m[h]||"",b="bg-white hover:bg-blue-400";r?b="bg-red-300 hover:bg-red-600":i&&(b="bg-gray-300 hover:bg-blue-400");var O="border border-blue-800";c&&l%2===1&&(O="border-2 border-red-400 md:border md:border-blue-800"),console.debug("Cell rerender ".concat(n));var k=function(e){var o=S(e);d(z({cellIndex:n,sectionIndex:t,open:!0,menuCoordinates:o})),e.preventDefault()},C=function(e){p&&(d(w({cellIndex:n,sectionIndex:t,intensity:j?0:1})),e.preventDefault())};return(0,W.jsxs)("div",{ref:u,className:"fadeBg relative select-none h-10 cursor-pointer ".concat(O," ").concat(b),role:"button",tabIndex:0,onContextMenu:C,onClick:k,onKeyPress:function(e){var n;(n=C,function(e){"Enter"===e.key&&n(e)})(e),L(k)(e)},children:[(0,W.jsx)("div",{className:"absolute w-full h-full flex flex-row items-center justify-center",children:j?y.toLocaleUpperCase():y}),g&&(0,W.jsx)("div",{className:"absolute w-full h-full grid grid-rows-2 grid-cols-3",children:(0,W.jsx)("div",{className:"col-start-3 col-end-3 flex justify-end",children:(0,W.jsx)(B,{className:"w-full"})})})]})};Q.defaultProps={isPlaying:void 0};var $=(0,s.memo)(Q),ee=t(219),ne=["children","className"];function te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var se=function(e){var n=e.children,t=e.className,o=(0,ee.Z)(e,ne);return(0,W.jsx)("button",oe(oe({type:"button",className:"text-gray-800 cursor-pointer ".concat(t)},o),{},{children:n}))};se.defaultProps={className:void 0,children:void 0};var re=(0,s.memo)(se),ie=function(e){var n=e.children,t=e.onClick;return(0,W.jsx)(re,{className:"bg-blue-100 hover:bg-blue-50 mr-2 spinIcon w-10 p-2",onClick:t,children:n})},ce=(0,s.memo)(ie);function le(){return(0,W.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"max-h-full max-w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}var ue=t(7294).useEffect;function ae(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function de(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ae(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ae(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var fe=function(e){var n=e.open,t=e.onOpenChange,o=e.className,r=e.style,i=e.children,c=e.left,l=e.top,u=(0,s.useRef)(),a=(0,s.useState)(),d=a[0],f=a[1],m=(0,s.useCallback)((function(e){n&&(t(!1),e.stopPropagation())}),[n,t]);!function(e,n){ue((function(){var t=function(t){e.current&&!e.current.contains(t.target)&&n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),document.addEventListener("keypress",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t),document.removeEventListener("keypress",t)}}),[e,n])}(u,m),(0,s.useEffect)((function(){if(u.current&&void 0!==c&&void 0!==l){var e=window.innerWidth-u.current.clientWidth-10,n=window.innerHeight-u.current.clientHeight-10,t=Math.max(Math.min(c,e),10),o=Math.max(Math.min(l,n),10);f({left:t,top:o})}else f(null)}),[c,n,l]);var p=d?"":"invisible";return n&&(0,W.jsx)("div",{ref:u,className:"popupmenu z-10 ".concat(p," ").concat(o),style:de(de({},r),d||{}),role:"none",children:i})};fe.defaultProps={className:"",style:null,children:void 0,left:void 0,top:void 0};var me=fe,pe=t(1508),ve=function(e){var n=e.children,t=e.id;return(0,W.jsx)("label",{htmlFor:t,className:"flex flex-row justify-between items-end mt-3 first:mt-0",children:n})};ve.defaultProps={id:void 0,children:void 0};var xe=(0,pe.Z)(Array(20).keys()).map((function(e){return e+1})),he=function(e){var n=e.sectionId,t=u(n),i=(0,o.I0)(),c=t.cellsPerLine,l=void 0===c?16:c,a=t.divideEvery,d=void 0===a?4:a,f=t.sounds,m=void 0===f?"ka,don":f,p=(0,s.useCallback)((function(e){var t=e.target,o=t.name,s=t.value,c="number"===t.dataType?Number(s):s;i(y({sectionId:n,settings:(0,r.Z)({},o,c)}))}),[i,n]);return(0,W.jsxs)("form",{className:"flex flex-col ",children:[(0,W.jsxs)(ve,{children:["Cells Per Line",(0,W.jsx)("select",{id:"cellsPerLine_".concat(n),name:"cellsPerLine_".concat(n),className:"p-2 ",onChange:p,value:l,"data-data-type":"number",children:xe.map((function(e){return(0,W.jsx)("option",{value:e,children:e},"cellsPerLine_".concat(e))}))})]}),(0,W.jsxs)(ve,{children:["Divide every",(0,W.jsx)("select",{id:"divideEvery_".concat(n),name:"divideEvery_".concat(n),className:"p-2 ",onChange:p,value:d,"data-data-type":"number",children:xe.map((function(e){return(0,W.jsx)("option",{value:e,children:e},"defaultDivideEvery_".concat(e))}))})]}),(0,W.jsxs)(ve,{id:m,children:["Available Sounds",(0,W.jsx)("input",{id:"sounds_".concat(n),name:"sounds_".concat(n),className:"border-black border p-1 ml-5",onChange:p,value:m})]})]})};he.defaultProps={};var je=(0,s.memo)(he),ge=function(e){var n=e.sectionId,t=e.open,o=e.onOpenChange,s=e.left,r=e.top;return(0,W.jsx)(me,{open:t,onOpenChange:o,left:s,top:r,className:"grid grid-rows-1 grid-cols-1 w-max max-h-48 p-4",children:(0,W.jsx)(je,{sectionId:n})})};ge.defaultProps={left:void 0,top:void 0};var ye=ge,be=function(){return(0,W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"max-h-full max-w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 12H6"})})},Oe=function(){return(0,W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"max-h-full max-w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},we=function(e){var n=e.sectionId,t=u(n),r=t.cellsPerLine,i=t.divideEvery,c=(0,s.useState)(!1),l=c[0],a=c[1],f=(0,o.I0)(),m=Y(),p=d(n),v=p.sectionName,x=p.totalLines,g=p.id,y=[],b=r*x,O=(0,s.useState)(null),w=O[0],k=O[1],C=r>7?Math.floor(r/2):r;console.debug("Section rerender ".concat(v," - ").concat(g));for(var P=0;P<b;P++)y.push((0,W.jsx)($,{isStartingCell:P%i===0,isFirstCellInLine:P%r===0,cellsPerLine:r,cellIndex:P,sectionIndex:n},"cell_".concat(n,"_").concat(P)));return(0,W.jsxs)("div",{className:"mb-8 p-1",children:[(0,W.jsxs)("div",{className:"flex flex-row align-baseline",children:[m&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ce,{onClick:function(){f(h({sectionIndex:n,totalLines:x+1}))},children:(0,W.jsx)(Oe,{})}),(0,W.jsx)(ce,{onClick:function(){f(h({sectionIndex:n,totalLines:x-1}))},children:(0,W.jsx)(be,{})}),(0,W.jsxs)(ce,{onClick:function(e){a(!0),k(S(e)),e.preventDefault(),e.stopPropagation()},children:[(0,W.jsx)(le,{}),(0,W.jsx)(ye,{sectionId:n,open:l,onOpenChange:function(e){a(e)},left:null===w||void 0===w?void 0:w[0],top:null===w||void 0===w?void 0:w[1]})]})]}),(0,W.jsx)(ce,{onClick:function(e){f(V({sectionCommentOpen:!0,sectionCommentSectionId:n,sectionCommentCoordinates:S(e)}))},children:(0,W.jsx)(B,{})}),m?(0,W.jsx)("textarea",{type:"text",value:v,className:"text-2xl w-full outline-none p-2 resize-none",rows:1,onChange:function(e){f(j({sectionIndex:n,sectionName:e.target.value}))}}):(0,W.jsx)("div",{className:"text-2xl w-full p-2",children:v})]}),(0,W.jsx)("div",{className:"bg-blue-500 grid grid-cols-".concat(C," md:grid-cols-").concat(r," border border-blue-800"),children:y})]},"section_".concat(n))};we.defaultProps={sectionId:void 0};var ke,Ce=(0,s.memo)(we),Pe={reducer:(ke={},(0,r.Z)(ke,l,I),(0,r.Z)(ke,M,H),(0,r.Z)(ke,X,q),ke)},Ne=(0,i.xC)(Pe),Ie="taikoNotesState",Se=function(){var e=Ne.getState().main;localStorage.setItem(Ie,JSON.stringify(e))},Le=["className"];function Ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var De=function(e){var n=e.className,t=(0,ee.Z)(e,Le);return(0,W.jsx)(re,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ee(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({className:"p-3 flex items-center justify-between text-left bg-blue-100 hover:bg-blue-50 ".concat(n)},t))};De.defaultProps={className:""};var Me=(0,s.memo)(De),_e=function(){return(0,W.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"max-h-full max-w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,W.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},Ze=function(e){var n=e.className,t=e.children;return(0,W.jsx)("i",{className:"inline-flex items-baseline ".concat(n),children:t})};Ze.defaultProps={className:"",children:void 0};var Te=Ze,Ue=function(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.main.title}),o.wU),t=Y();return(0,W.jsxs)("div",{className:"settings p-1 mt-3 mb-3 flex flex-col md:flex-row",children:[(0,W.jsxs)("div",{className:"w-full md:w-8/12 lg:w-6/12 grid logoGrid mr-3",children:[(0,W.jsx)("img",{src:"favicon/Taiko.svg",className:"w-full p-2",alt:"taiko logo"}),t?(0,W.jsx)("textarea",{className:"text-2xl w-full outline-none p-2 resize-none",value:n,onChange:function(n){e(x(n.target.value))}}):(0,W.jsx)("div",{className:"text-2xl w-full p-2",children:n})]}),(0,W.jsx)("div",{className:"w-full md:w-4/12 lg:w-6/12 flex flex-col justify-between",children:(0,W.jsxs)("div",{className:"mt-2 md:mt-0 grid grid-rows-2 grid-flow-col gap-1",children:[t&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Me,{onClick:function(){e(C())},children:"Add Section"}),(0,W.jsx)(Me,{onClick:function(){e(P())},children:"Remove Last Section"}),(0,W.jsx)(Me,{onClick:function(){Se()},children:"Save"}),(0,W.jsx)(Me,{onClick:function(){var n=function(){var e=localStorage.getItem(Ie);return e?JSON.parse(e):null}();console.debug("entire state",n),e(k(n))},children:"Load"}),(0,W.jsx)(Me,{onClick:function(){e(N())},children:"Clear"})]}),(0,W.jsxs)(Me,{onClick:function(){e(J(!t))},className:t?"bg-blue-50":"bg-red-50",children:["Toggle Edit",(0,W.jsx)(Te,{className:"w-8",children:(0,W.jsx)(_e,{})})]})]})})]})};Ue.defaultProps={};var ze=(0,s.memo)(Ue),He=function(){var e=(0,o.v9)((function(e){return e.main.sections.map((function(e){return e.id}))}),o.wU);return console.debug("TaikoGrid rerender"),(0,W.jsxs)("div",{children:[(0,W.jsx)(ze,{}),(0,W.jsx)("div",{children:e.map((function(e,n){return(0,W.jsx)(Ce,{sectionId:n},e)}))})]})},We=(0,s.memo)(He),Be=function(e){var n=e.children;return(0,W.jsx)("div",{className:"container mx-auto",children:n})};Be.defaultProps={children:"asd"};var Re=Be,Fe=["className"];function Xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}var Ye=function(e){var n=e.className,t=(0,ee.Z)(e,Fe);return(0,W.jsx)("div",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({className:"p-3 hover:bg-blue-200 ".concat(n)},t))};Ye.defaultProps={className:""};var Ae=(0,s.memo)(Ye),Ge=function(){var e=(0,o.v9)((function(e){return e.cell.sectionIndex}),o.wU),n=a(e),t=n?Math.ceil(Object.keys(n).length/4):0,r=(0,o.I0)(),i=(0,s.useRef)(),c=(0,o.v9)((function(e){return e.cell.cellIndex}),o.wU),l=(0,o.v9)((function(e){return e.cell.menuCoordinates}),o.wU),u=(0,o.v9)((function(e){return e.cell.open}),o.wU),d=Y(),m=(0,s.useState)(!1),p=m[0],v=m[1],x=(0,s.useRef)(),h=f(e,c).comment;return(0,s.useEffect)((function(){p&&x.current&&x.current.focus()}),[p]),(0,s.useEffect)((function(){u&&(setTimeout((function(){i.current&&i.current.focus()}),0),v(!1))}),[u]),console.debug("CellPopupMenu rerender"),u&&(d||h)?(0,W.jsx)(me,{open:u,left:l[0],top:l[1],onOpenChange:function(e){r(U(e))},children:(0,W.jsxs)("div",{className:"flex",children:[!p&&d&&(0,W.jsx)("div",{className:"grid grid-rows-4 grid-cols-".concat(t," grid-flow-col w-max max-h-48"),children:Object.values(n).map((function(n,t){var o=function(t){r(b({cellIndex:c,sectionIndex:e,sound:n}))};return(0,W.jsx)(Ae,{ref:0===t?i:null,role:"button",tabIndex:0,onClick:o,onKeyPress:function(e){L(o)(e)},children:n},n)}))}),p&&d&&(0,W.jsx)("div",{className:"grid grid-rows-1 grid-cols-1 grid-flow-col w-max max-h-48",children:(0,W.jsx)("textarea",{ref:x,className:"w-full h-full resize-none p-2 outline-none",placeholder:"Your notes here",onChange:function(n){r(O({cellIndex:c,sectionIndex:e,comment:n.target.value}))},value:h})}),d&&(0,W.jsx)("div",{className:"border-0 border-l-2 border-gray-200 grid grid-rows-4 grid-cols-1 grid-flow-col w-max max-h-48",children:(0,W.jsx)(Ae,{className:"".concat(p?"bg-blue-300":""," flex items-center justify-center w-12"),onClick:function(){v(!p)},children:(0,W.jsx)(B,{})})}),!d&&h&&(0,W.jsx)("div",{className:"p-3 max-w-sm whitespace-pre-wrap",children:h})]})}):null};Ge.defaultProps={};var Je=(0,s.memo)(Ge),Ke=function(){var e,n=(0,o.v9)((function(e){var n=e.edit;return{sectionCommentOpen:n.sectionCommentOpen,sectionCommentSectionId:n.sectionCommentSectionId,sectionCommentCoordinates:n.sectionCommentCoordinates}}),o.wU),t=n.sectionCommentOpen,r=n.sectionCommentSectionId,i=n.sectionCommentCoordinates,c=(e=r,(0,o.v9)((function(n){var t,o=n.main.sections;return void 0!==e?null===o||void 0===o||null===(t=o[e])||void 0===t?void 0:t.comment:null}),o.wU)),l=(0,s.useRef)(),u=(0,o.I0)(),a=Y();return console.debug("CommentEditMenu rerender"),(0,s.useEffect)((function(){t&&l.current&&setTimeout((function(){l.current.focus()}),0)}),[t]),t&&(a||c)?(0,W.jsx)(me,{open:t,left:i[0],top:i[1],onOpenChange:function(e){u(K(e))},className:a?"w-1/2 h-1/2":"max-w-lg",children:a?(0,W.jsx)("textarea",{className:"w-full h-full outline-none p-2 resize-none",placeholder:"Your notes here",ref:l,value:c,onChange:function(e){u(g({sectionIndex:r,comment:e.target.value}))}}):(0,W.jsx)("div",{className:"w-full h-full whitespace-pre-wrap p-2 overflow-auto",children:c})}):null};Ke.defaultProps={};var Ve=(0,s.memo)(Ke);var qe=function(){return(0,W.jsx)(o.zt,{store:Ne,children:(0,W.jsxs)("div",{className:"app",children:[(0,W.jsx)(Re,{children:(0,W.jsx)(We,{})}),(0,W.jsx)(Je,{}),(0,W.jsx)(Ve,{})]})})};function Qe(){return(0,W.jsx)(qe,{})}},8581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4200)}])}},function(e){e.O(0,[774,19,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);