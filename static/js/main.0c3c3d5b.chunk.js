(this.webpackJsonptaikonotes=this.webpackJsonptaikonotes||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var s=n(2),i=n.n(s),a=n(10),c=n.n(a),l=(n(17),n(1)),r=n(5),o=n(6),d=n(3),u=n(8),b=n(7),j=n(0),h=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(e){var s;return Object(r.a)(this,n),(s=t.call(this,e)).state={selectedSoundIndex:null},s}return Object(o.a)(n,[{key:"getNextSound",value:function(e,t){return null==t?0:t+1<e.length?t+1:null}},{key:"getCurrentSoundIndex",value:function(){return this.state.selectedSoundIndex}},{key:"render",value:function(){var e=this,t=this.props,n=t.index,s=t.divideEvery,i=t.sounds,a="hover:bg-gray-300";return n%s===0&&(a="bg-gray-300 hover:bg-gray-600"),t.isPlaying&&(a="bg-red-300 hover:bg-red-600"),Object(j.jsx)("div",{className:"flex flex-row justify-center items-center select-none border border-blue-800 h-10 cursor-pointer ".concat(a),onClick:function(){var t=e.getNextSound(i,e.state.selectedSoundIndex);e.setState(Object(l.a)(Object(l.a)({},e.state),{},{selectedSoundIndex:t}))},onContextMenu:function(t){t.preventDefault(),e.setState(Object(l.a)(Object(l.a)({},e.state),{},{selectedSoundIndex:null}))},children:i[this.state.selectedSoundIndex]})}}]),n}(i.a.Component),m=n(4),v=n(11),g=Object(v.a)(Array(20).keys()).map((function(e){return e+1})),x=function(e){var t=e.settings,n=e.setSettings,s=function(e){n(Object(l.a)(Object(l.a)({},t),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("form",{onSubmit:function(e){},className:"flex flex-col ",children:[Object(j.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(j.jsx)("label",{children:"Cells Per Line"}),Object(j.jsx)("select",{name:"cellsPerLine",className:"p-2 ",onChange:s,value:t.cellsPerLine,children:g.map((function(e){return Object(j.jsx)("option",{value:e,children:e},"cellsPerLine_".concat(e))}))})]}),Object(j.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(j.jsx)("label",{children:"Divide every"}),Object(j.jsx)("select",{name:"divideEvery",className:"p-2 ",onChange:s,value:t.divideEvery,children:g.map((function(e){return Object(j.jsx)("option",{value:e,children:e},"defaultDivideEvery_".concat(e))}))})]}),Object(j.jsxs)("div",{className:"flex flex-row justify-between items-end mt-3",children:[Object(j.jsx)("label",{children:"Available Sounds"}),Object(j.jsx)("input",{name:"sounds",className:"border-black border p-1",onChange:s,value:t.sounds})]})]})},O=n(12),f=["children","className"],p=function(e){var t=e.children,n=e.className,s=Object(O.a)(e,f);return Object(j.jsx)("button",Object(l.a)(Object(l.a)({className:"p-3 bg-blue-100 text-gray-800 cursor-pointer hover:opacity-75 ".concat(n)},s),{},{children:t}))},y=[new Audio("/drum-sounds-master/closed-hihat.mp3"),new Audio("/drum-sounds-master/acoustic-snare.mp3"),new Audio("/drum-sounds-master/bass-drum-1.mp3")],S=function(e){Object(u.a)(n,e);var t=Object(b.a)(n);function n(e){var s;Object(r.a)(this,n);return(s=t.call(this,e)).state={settings:{cellsPerLine:"16",divideEvery:"4",totalLines:"4",sounds:"hihat, snare, bass"},noteIndex:null,isPlaying:!1},s.cells=[],s.addLine=s.addLine.bind(Object(d.a)(s)),s.removeLine=s.removeLine.bind(Object(d.a)(s)),s.setSettings=s.setSettings.bind(Object(d.a)(s)),s.submitTest=s.submitTest.bind(Object(d.a)(s)),s.playSound=s.playSound.bind(Object(d.a)(s)),s.playSong=s.playSong.bind(Object(d.a)(s)),s.stopSong=s.stopSong.bind(Object(d.a)(s)),s}return Object(o.a)(n,[{key:"setSettings",value:function(e){this.setState(Object(l.a)(Object(l.a)({},this.state),{},{settings:e}))}},{key:"addLine",value:function(){this.setSettings(Object(l.a)(Object(l.a)({},this.state.settings),{},{totalLines:+this.state.settings.totalLines+1+""}))}},{key:"removeLine",value:function(){this.setSettings(Object(l.a)(Object(l.a)({},this.state.settings),{},{totalLines:+this.state.settings.totalLines-1+""}))}},{key:"submitTest",value:function(e){e.preventDefault();var t=Object(l.a)(Object(l.a)({},this.state.settings),{},{song:{main:this.getCellIndices()}});console.log(t)}},{key:"playSong",value:function(){var e=this;this.playTimer?this.setState({isPlaying:!0,noteIndex:null}):this.playTimer=setInterval((function(){var t=e.getCellIndices(),n=Number.isInteger(e.state.noteIndex)?e.state.noteIndex+1:0;e.setState({isPlaying:!0,noteIndex:n}),Number.isInteger(t[n])&&y[t[n]]&&(y[t[n]].currentTime=0,y[t[n]].play())}),200)}},{key:"stopSong",value:function(){this.playTimer&&(clearInterval(this.playTimer),this.playTimer=null),this.setState({isPlaying:!1,noteIndex:null})}},{key:"playSound",value:function(e){this.getCellIndices()}},{key:"getCellIndices",value:function(){return this.cells.map((function(e){return e.current.getCurrentSoundIndex()}))}},{key:"render",value:function(){var e=[],t=this.state,n=t.noteIndex,s=t.isPlaying,a=t.settings,c=a.cellsPerLine,l=a.totalLines,r=a.divideEvery,o=c*l,d=a.sounds.split(",").map((function(e){return e.trim()}));this.cells=[];for(var u=0;u<o;u++){var b=i.a.createRef();this.cells.push(b),e.push(Object(j.jsx)(h,{ref:b,index:u,divideEvery:r,cellsPerLine:c,sounds:d,isPlaying:s&&u===n},u))}return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"settings mt-3 mb-3 p-3 flex flex-row",children:[Object(j.jsx)("img",{src:"".concat("","/favicon/Taiko.svg"),className:"w-1/12 pr-2"}),Object(j.jsx)("div",{className:"w-full md:w-6/12 lg:w-4/12 border border-blue-300 p-2 mr-auto w-full",children:Object(j.jsx)(x,{settings:this.state.settings,setSettings:this.setSettings})}),Object(j.jsxs)("div",{className:"w-full md:w-6/12 lg:w-4/12 flex flex-col justify-between",children:[Object(j.jsx)(p,{onClick:this.playSong,className:"m-4",children:"Play"}),Object(j.jsx)(p,{onClick:this.stopSong,className:"m-4",children:"Stop"}),Object(j.jsx)(p,{onClick:this.addLine,className:"m-4",children:"Add Line"}),Object(j.jsx)(p,{onClick:this.removeLine,className:"m-4",children:"Remove Line"})]})]}),Object(j.jsx)("div",{className:"grid grid-cols-".concat(c," border border-blue-800"),children:e})]})}}]),n}(i.a.Component),w=function(e){var t=e.children;return Object(j.jsx)("div",{className:"container mx-auto",children:t})};var k=function(){return Object(j.jsx)("div",{className:"app",children:Object(j.jsx)(w,{children:Object(j.jsx)(S,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(j.jsx)(k,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.0c3c3d5b.chunk.js.map